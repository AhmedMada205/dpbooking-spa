<div class="users-container">
  <!-- Header -->
  <div class="header">
    <h2>๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
    <button routerLink="/users/new" class="btn-add">
      <i>โ</i>
      <span>ูุณุชุฎุฏู ุฌุฏูุฏ</span>
    </button>
  </div>

  <!-- Search Bar -->
  <div class="search-container">
    <div class="search-box">
      <input 
        type="text" 
        #searchInput
        placeholder="ุงุจุญุซ ุนู ูุณุชุฎุฏู ุจุงูุงุณูุ ุงุณู ุงููุณุชุฎุฏูุ ุฃู ุงูุจุฑูุฏ..."
        (keyup.enter)="searchUsers(searchInput.value)"
      />
      <button (click)="searchUsers(searchInput.value)">
        <i>๐</i>
        <span>ุจุญุซ</span>
      </button>
      <button (click)="searchInput.value = ''; loadUsers()" class="btn-clear">
        <i>๐</i>
        <span>ุนุฑุถ ุงููู</span>
      </button>
    </div>

    <!-- Stats -->
    <div class="stats">
      <span class="stat-item">
        <i>๐ฅ</i>
        <strong>{{ totalUsers }}</strong> ูุณุชุฎุฏู
      </span>
      <span class="stat-item">
        <i>๐</i>
        ุตูุญุฉ {{ currentPage }} ูู {{ totalPages }}
      </span>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="loading">
    <div class="spinner"></div>
    <span>ุฌุงุฑู ุชุญููู ุงููุณุชุฎุฏููู...</span>
  </div>

  <!-- Error State -->
  <div class="error-state" *ngIf="error && !loading">
    <div class="error-icon">โ๏ธ</div>
    <h3>ุญุฏุซ ุฎุทุฃ</h3>
    <p>{{ error }}</p>
    <button (click)="loadUsers()" class="btn-retry">
      <i>๐</i>
      <span>ุฅุนุงุฏุฉ ุงููุญุงููุฉ</span>
    </button>
  </div>

  <!-- Users Table -->
  <div class="table-container" *ngIf="users.length > 0 && !loading">
    <table class="users-table">
      <thead>
        <tr>
          <th>#</th>
          <th>ุงุณู ุงููุณุชุฎุฏู</th>
          <th>ุงูุงุณู ุงููุงูู</th>
          <th>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</th>
          <th>ุฑูู ุงููุงุชู</th>
          <th>ุงูุตูุงุญูุฉ</th>
          <th>ุงูุญุงูุฉ</th>
          <th>ุชุงุฑูุฎ ุงูุฅูุดุงุก</th>
          <th>ุงูุฅุฌุฑุงุกุงุช</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users; let i = index">
          <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
          <td>
            <div class="user-cell">
              <div class="user-avatar">{{ user.firstName?.charAt(0) }}</div>
              <div class="user-info">
                <strong>{{ user.userName }}</strong>
              </div>
            </div>
          </td>
          <td>{{ user.firstName }} {{ user.lastName }}</td>
          <td>{{ user.email || 'ุบูุฑ ูุญุฏุฏ' }}</td>
          <td>{{ user.phone || 'ุบูุฑ ูุญุฏุฏ' }}</td>
          <td>
            <span class="role-badge" [class]="'role-' + user.role.toLowerCase()">
              {{ user.role }}
            </span>
          </td>
          <td>
            <span class="status-badge" [class.active]="user.isActive" [class.inactive]="!user.isActive">
              {{ user.isActive ? 'ูุดุท' : 'ุบูุฑ ูุดุท' }}
            </span>
          </td>
          <td>{{ user.createdAt | date:'yyyy/MM/dd' }}</td>
          <td>
            <div class="action-buttons">
              <button class="btn-action view" [routerLink]="['/users', user.id]" title="ุนุฑุถ">
                <i>๐๏ธ</i>
              </button>
              <button class="btn-action edit" [routerLink]="['/users/edit', user.id]" title="ุชุนุฏูู">
                <i>โ๏ธ</i>
              </button>
              <button 
                class="btn-action toggle-status" 
                [class.deactivate]="user.isActive"
                [class.activate]="!user.isActive"
                (click)="toggleUserStatus(user)"
                [title]="user.isActive ? 'ุชุนุทูู' : 'ุชูุนูู'"
              >
                <i>{{ user.isActive ? 'โธ๏ธ' : 'โถ๏ธ' }}</i>
              </button>
              <button 
                class="btn-action delete" 
                (click)="deleteUser(user)"
                title="ุญุฐู"
                *ngIf="user.role !== 'Admin'"
              >
                <i>๐๏ธ</i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="users.length === 0 && !loading && !error">
    <div class="empty-icon">๐ฅ</div>
    <h3>ูุง ุชูุฌุฏ ูุณุชุฎุฏููู</h3>
    <p>ูู ูุชู ุงูุนุซูุฑ ุนูู ุฃู ูุณุชุฎุฏููู ูุทุงุจููู ููุจุญุซ</p>
    <button routerLink="/users/new" class="btn-add-first">
      <i>โ</i>
      <span>ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</span>
    </button>
  </div>

  <!-- Pagination -->
  <div class="pagination" *ngIf="totalPages > 1 && !loading">
    <button 
      class="page-btn" 
      [disabled]="currentPage === 1"
      (click)="previousPage()"
    >
      <i>โ</i>
      <span>ุงูุณุงุจู</span>
    </button>
    
    <div class="page-numbers">
      <button 
        *ngFor="let page of getPageNumbers()"
        class="page-number"
        [class.active]="page === currentPage"
        (click)="goToPage(page)"
      >
        {{ page }}
      </button>
      
      <span *ngIf="totalPages > 5 && currentPage < totalPages - 2">...</span>
    </div>
    
    <button 
      class="page-btn" 
      [disabled]="currentPage === totalPages"
      (click)="nextPage()"
    >
      <span>ุงูุชุงูู</span>
      <i>โถ</i>
    </button>
    
    <div class="page-size-selector">
      <label>ุนุฑุถ:</label>
      <select [(ngModel)]="pageSize" (change)="currentPage = 1; loadUsers()">
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="50">50</option>
      </select>
      <span>ููู ุตูุญุฉ</span>
    </div>
  </div>
</div>