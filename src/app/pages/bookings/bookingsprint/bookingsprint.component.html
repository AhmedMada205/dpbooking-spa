<!-- bookingsprint.component.html -->
<div class="print-page-container" dir="rtl">
  <!-- ==================== HEADER ==================== -->
  <div class="page-header no-print">
    <div class="header-content">
      <div class="header-title">
        <div class="header-icon">๐จ๏ธ</div>
        <div class="header-text">
          <h1>ูุฑูุฒ ุงูุทุจุงุนุฉ ูุงูุชูุงุฑูุฑ ุงููุชูุฏู</h1>
          <div class="header-subtitle">
            <span class="report-id">๐ {{ currentTime }}</span>
            <span class="report-date">๐ {{ reportDate }}</span>
            <span class="total-count"
              >๐ {{ filteredBookings.length }} ุญุฌุฒ</span
            >
          </div>
        </div>
      </div>

      <div class="header-actions">
        <button class="btn btn-back" (click)="goBack()">
          <span class="btn-icon">โฐ</span>
          <span class="btn-text">ุงูุนูุฏุฉ ููุญุฌูุฒุงุช</span>
        </button>
      </div>
    </div>
  </div>

  <!-- ==================== FILTERS SECTION ==================== -->
  <div class="filters-section no-print">
    <div class="section-header">
      <h2>
        <span class="section-icon">โ๏ธ</span>
        <span class="section-title">ุชููุฆุฉ ุงูุชูุฑูุฑ</span>
      </h2>
    </div>

    <div class="filters-grid">
      <!-- Date Selection -->
      <div class="filter-card date-filter">
        <div class="filter-header">
          <span class="filter-icon">๐</span>
          <h3>ุงุฎุชุฑ ุงูุชุงุฑูุฎ</h3>
        </div>

        <div class="filter-body">
          <!-- ุชุงุฑูุฎ ูุญุฏุฏ -->
          <div class="date-input-wrapper mb-3">
            <label class="input-label">ุชุงุฑูุฎ ูุญุฏุฏ</label>
            <div class="input-group">
              <input
                type="date"
                [(ngModel)]="filterDate"
                (ngModelChange)="applyFilters()"
                class="date-input"
                title="ุชุงุฑูุฎ ูุนูู"
              />
              <span class="input-icon">๐</span>
            </div>
          </div>

          <hr />

          <!-- ูุชุฑุฉ ุฒูููุฉ -->
          <div class="date-range-wrapper">
            <div class="date-input-wrapper">
              <label class="input-label">ูู</label>
              <div class="input-group">
                <input
                  type="date"
                  [(ngModel)]="filterDateFrom"
                  (ngModelChange)="applyFilters()"
                  class="date-input"
                />
                <span class="input-icon">๐</span>
              </div>
            </div>

            <div class="date-input-wrapper">
              <label class="input-label">ุฅูู</label>
              <div class="input-group">
                <input
                  type="date"
                  [(ngModel)]="filterDateTo"
                  (ngModelChange)="applyFilters()"
                  class="date-input"
                />
                <span class="input-icon">๐</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Filter Options -->
      <div class="filter-card options-filter">
        <div class="filter-header">
          <span class="filter-icon">๐ฏ</span>
          <h3>ุฎูุงุฑุงุช ุงูููุชุฑุฉ</h3>
        </div>
        <div class="filter-body">
          <div class="filter-grid">
            <div class="form-group">
              <label class="form-label">ููุน ุงูุญุฌุฒ</label>
              <div class="select-wrapper">
                <select
                  [ngModel]="filterType"
                  (ngModelChange)="changeType($event)"
                  class="form-select"
                >
                  <option value="all">ุงููู</option>
                  <option value="5">ุฅูุทุงุฑ ุฑูุถุงู</option>
                  <option value="6">ุณุญูุฑ ุฑูุถุงู</option>
                </select>
                <span class="select-icon">โผ</span>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">ุญุงูุฉ ุงูุญุฌุฒ</label>
              <div class="select-wrapper">
                <select
                  [ngModel]="filterStatus"
                  (ngModelChange)="changeStatus($event)"
                  class="form-select"
                >
                  <option value="all">ุงููู</option>
                  <option value="0">ููุฏ ุงูุงูุชุธุงุฑ</option>
                  <option value="3">ููุบู</option>
                  <option value="2">ููุชูู</option>
                  <option value="1">ูุคูุฏ</option>
                  <option value="4">ูุคุฌู</option>
                </select>
                <span class="select-icon">โผ</span>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">ุงูููุงู</label>
              <div class="select-wrapper">
                <select
                  [ngModel]="filterVenue"
                  (ngModelChange)="changeVenue($event)"
                  class="form-select"
                >
                  <option value="all">ุงููู</option>
                  <option
                    *ngFor="let venue of venues"
                    [value]="venue.id || venue.venueId"
                  >
                    {{ venue.name || venue.venueName }}
                  </option>
                </select>
                <span class="select-icon">โผ</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="filter-card quick-actions-filter">
        <div class="filter-header">
          <span class="filter-icon">๐</span>
          <h3>ุทุจุงุนุฉ ุณุฑูุนุฉ</h3>
        </div>
        <div class="filter-body">
          <div class="quick-actions-grid">
            <button
              class="quick-action-btn iftar-btn"
              (click)="changeType('RamadanIftar'); applyFilters()"
            >
              <span class="action-icon">๐ฝ๏ธ</span>
              <span class="action-text">ุฅูุทุงุฑ ุงูููู</span>
            </button>
            <button
              class="quick-action-btn suhur-btn"
              (click)="changeType('RamadanSuhoor'); applyFilters()"
            >
              <span class="action-icon">๐</span>
              <span class="action-text">ุณุญูุฑ ุงูููู</span>
            </button>
            <button
              class="quick-action-btn station-btn"
              (click)="changeTemplate('station'); printReport()"
            >
              <span class="action-icon">๐</span>
              <span class="action-text">ุทุจุงุนุฉ ุชูุฒูุน</span>
            </button>
            <button
              class="quick-action-btn kitchen-btn"
              (click)="changeTemplate('kitchen'); printReport()"
            >
              <span class="action-icon">๐จโ๐ณ</span>
              <span class="action-text">ุทุจุงุนุฉ ูุทุจุฎ</span>
            </button>
            <button
              class="quick-action-btn financial-btn"
              (click)="changeTemplate('financial'); printReport()"
            >
              <span class="action-icon">๐ฐ</span>
              <span class="action-text">ุทุจุงุนุฉ ูุงูู</span>
            </button>
            <button
              class="quick-action-btn compact-btn"
              (click)="changeTemplate('compact'); printReport()"
            >
              <span class="action-icon">๐</span>
              <span class="action-text">ุทุจุงุนุฉ ุงูุจูุงุจุฉ</span>
            </button>
            <button
              class="quick-action-btn payment-only-btn"
              (click)="printPaymentOnlyReport()"
            >
              <span class="action-icon">๐ต</span>
              <span class="action-text">ุชูุฑูุฑ ุงูุงูุจุฑูุดู</span>
            </button>
            <button
              class="quick-action-btn venues-stats-btn"
              (click)="printVenuesStatistics()"
            >
              <span class="action-icon">๐</span>
              <span class="action-text">ุฅุญุตุงุฆูุงุช ุงูุฃูุงูู</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== TEMPLATES SECTION ==================== -->
  <div class="templates-section no-print">
    <div class="section-header">
      <h2>
        <span class="section-icon">๐จ</span>
        <span class="section-title">ููุงูุจ ุงูุทุจุงุนุฉ</span>
      </h2>
    </div>

    <div class="templates-grid">
      <div
        *ngFor="let template of printTemplates"
        [class.active]="activeTemplate === template.id"
        class="template-card"
        (click)="changeTemplate(template.id)"
      >
        <div class="template-card-inner">
          <div class="template-icon-wrapper">
            <span class="template-icon">{{ template.icon }}</span>
          </div>
          <div class="template-content">
            <h4 class="template-name">{{ template.name }}</h4>
            <p class="template-desc">
              {{ getTemplateDescription(template.id) }}
            </p>
          </div>
          <div class="template-badge" *ngIf="activeTemplate === template.id">
            <span class="badge-text">ูุญุฏุฏ</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== STATISTICS ==================== -->
  <div class="statistics-section no-print" *ngIf="filteredBookings.length > 0">
    <div class="section-header">
      <h2>
        <span class="section-icon">๐</span>
        <span class="section-title">ููุฎุต ุงูุญุฌูุฒุงุช</span>
      </h2>
    </div>

    <div class="stats-container">
      <div class="stats-cards">
        <div class="stat-card card-total">
          <div class="stat-card-inner">
            <div class="stat-icon-wrapper">
              <span class="stat-icon">๐</span>
            </div>
            <div class="stat-content">
              <div class="stat-value">{{ totalBookings }}</div>
              <div class="stat-label">ุนุฏุฏ ุงูุญุฌูุฒุงุช</div>
            </div>
            <div class="stat-trend" *ngIf="bookings.length > 0">
              <span class="trend-icon">๐</span>
              <span class="trend-text">100%</span>
            </div>
          </div>
        </div>

        <div class="stat-card card-guests">
          <div class="stat-card-inner">
            <div class="stat-icon-wrapper">
              <span class="stat-icon">๐ฅ</span>
            </div>
            <div class="stat-content">
              <div class="stat-value">{{ totalGuests }}</div>
              <div class="stat-label">ุนุฏุฏ ุงูุถููู</div>
            </div>
            <div class="stat-trend">
              <span class="trend-icon">๐ค</span>
              <span class="trend-text"
                >ูุชูุณุท {{ totalGuests / totalBookings | number: "1.0-0" }}</span
              >
            </div>
          </div>
        </div>

        <div class="stat-card card-amount">
          <div class="stat-card-inner">
            <div class="stat-icon-wrapper">
              <span class="stat-icon">๐ฐ</span>
            </div>
            <div class="stat-content">
              <div class="stat-value">{{ totalAmount | number }} ุฌ.ู</div>
              <div class="stat-label">ุงูุฅุฌูุงูู</div>
            </div>
            <div class="stat-trend">
              <span class="trend-icon">๐ต</span>
              <span class="trend-text">ูุจูุบ</span>
            </div>
          </div>
        </div>

        <div class="stat-card card-remaining">
          <div class="stat-card-inner">
            <div class="stat-icon-wrapper">
              <span class="stat-icon">โ๏ธ</span>
            </div>
            <div class="stat-content">
              <div class="stat-value">{{ totalRemaining | number }} ุฌ.ู</div>
              <div class="stat-label">ุงููุชุจูู</div>
            </div>
            <div class="stat-trend">
              <span class="trend-icon">๐</span>
              <span class="trend-text">ุงูุฏูุน</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Report Summary -->
      <div class="report-summary">
        <div class="summary-header">
          <h4>
            <span class="summary-icon">๐</span>
            ุชูุงุตูู ุงูุชูุฑูุฑ
          </h4>
        </div>
        <div class="summary-content">
          <div class="summary-item">
            <span class="item-label">ุนููุงู ุงูุชูุฑูุฑ:</span>
            <span class="item-value">{{ reportTitle }}</span>
          </div>
          <div class="summary-item">
            <span class="item-label">ุงูุชุงุฑูุฎ ุงููุญุฏุฏ:</span>
            <span class="item-value">{{
              filterDate ? (filterDate | date: "yyyy-MM-dd") : "ุงูููู"
            }}</span>
          </div>
          <div class="summary-item">
            <span class="item-label">ููุน ุงูุญุฌูุฒุงุช:</span>
            <span class="item-value">{{
              filterType === "all"
                ? "ุงููู"
                : getBookingTypeTextFromString(filterType)
            }}</span>
          </div>
          <div class="summary-item">
            <span class="item-label">ุญุงูุฉ ุงูุญุฌูุฒุงุช:</span>
            <span class="item-value">{{
              filterStatus === "all" ? "ุงููู" : filterStatus
            }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== BOOKINGS LIST ==================== -->
  <div
    class="bookings-list-section no-print"
    *ngIf="filteredBookings.length > 0"
  >
    <div class="section-header">
      <h2>
        <span class="section-icon">๐</span>
        <span class="section-title">ุงูุญุฌูุฒุงุช ุงููุญุฏุฏุฉ</span>
        <span class="section-count">({{ filteredBookings.length }})</span>
      </h2>
    </div>

    <div class="table-container">
      <table class="bookings-table">
        <thead>
          <tr>
            <th class="col-index">#</th>
            <th class="col-client">ุงูุนููู</th>
            <th class="col-phone">ุงููุงุชู</th>
            <th class="col-time">ุงูููุช</th>
            <th class="col-guests">ุงูุถููู</th>
            <th class="col-venue">ุงูููุงู</th>
            <th class="col-status">ุงูุญุงูุฉ</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let booking of filteredBookings; let i = index">
            <td class="col-index">{{ i + 1 }}</td>
            <td class="col-client">
              <div class="client-info">
                <div class="client-name">{{ booking.clientName || "---" }}</div>
                <div class="booking-id">#{{ booking.bookingId || "---" }}</div>
              </div>
            </td>
            <td class="col-phone">{{ booking.clientPhone || "---" }}</td>
            <td class="col-time">{{ formatTime(booking.bookingTime) }}</td>
            <td class="col-guests">
              <span class="guests-count">{{ booking.guestsCount || 0 }}</span>
            </td>
            <td class="col-venue">{{ getVenueName(booking.venueId) }}</td>
            <td class="col-status">
              <span
                class="status-badge"
                [class]="getStatusClass(booking.bookingStatus)"
              >
                {{ getStatusText(booking.bookingStatus) }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ==================== NO DATA ==================== -->
  <div
    *ngIf="!loading && filteredBookings.length === 0"
    class="no-data-section no-print"
  >
    <div class="no-data-content">
      <div class="no-data-icon">๐ญ</div>
      <h3 class="no-data-title">ูุง ุชูุฌุฏ ุญุฌูุฒุงุช</h3>
      <p class="no-data-message">ูุง ุชูุฌุฏ ุญุฌูุฒุงุช ุชุทุงุจู ูุนุงููุฑ ุงูููุชุฑุฉ ุงููุญุฏุฏุฉ</p>
      <button
        class="btn-reset"
        (click)="
          filterType = 'all';
          filterStatus = 'all';
          filterVenue = 'all';
          applyFilters()
        "
      >
        <span class="btn-icon">๐</span>
        <span class="btn-text">ุฅุนุงุฏุฉ ุชุนููู ุงูููุงุชุฑ</span>
      </button>
    </div>
  </div>

  <!-- ==================== LOADING ==================== -->
  <div *ngIf="loading" class="loading-section no-print">
    <div class="loading-content">
      <div class="spinner"></div>
      <h3 class="loading-title">ุฌุงุฑู ุชุญููู ุงูุญุฌูุฒุงุช</h3>
      <p class="loading-message">ูุฑุฌู ุงูุงูุชุธุงุฑ...</p>
    </div>
  </div>

  <!-- ==================== ACTION BUTTONS ==================== -->
  <div class="action-buttons no-print" *ngIf="filteredBookings.length > 0">
    <div class="actions-container">
      <div class="main-action">
        <button
          class="btn-action btn-primary"
          (click)="printReport()"
          [disabled]="loading"
        >
          <span class="btn-icon">๐จ๏ธ</span>
          <span class="btn-text"
            >ุทุจุงุนุฉ {{ getTemplateName(activeTemplate) }}</span
          >
        </button>
      </div>

      <div class="secondary-actions">
        <div class="action-group">
          <button
            class="btn-action btn-station"
            (click)="changeTemplate('station'); printReport()"
          >
            <span class="btn-icon">๐</span>
            <span class="btn-text">ุทุจุงุนุฉ ุชูุฒูุน</span>
          </button>
          <button
            class="btn-action btn-kitchen"
            (click)="changeTemplate('kitchen'); printReport()"
          >
            <span class="btn-icon">๐จโ๐ณ</span>
            <span class="btn-text">ุทุจุงุนุฉ ูุทุจุฎ</span>
          </button>
          <button
            class="btn-action btn-financial"
            (click)="changeTemplate('financial'); printReport()"
          >
            <span class="btn-icon">๐ฐ</span>
            <span class="btn-text">ุทุจุงุนุฉ ูุงูู</span>
          </button>
          <button
            class="btn-action btn-compact"
            (click)="changeTemplate('compact'); printReport()"
          >
            <span class="btn-icon">๐</span>
            <span class="btn-text">ุทุจุงุนุฉ ุงูุจูุงุจุฉ</span>
          </button>
        </div>

        <div class="utility-actions">
          <button class="btn-action btn-refresh" (click)="applyFilters()">
            <span class="btn-icon">๐</span>
            <span class="btn-text">ุชุญุฏูุซ ุงูุจูุงูุงุช</span>
          </button>
          <button class="btn-action btn-clear" (click)="resetFilters()">
  <span class="btn-icon">๐๏ธ</span>
  <span class="btn-text">ูุณุญ ุงูููุงุชุฑ</span>
</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== FOOTER ==================== -->
  <div class="page-footer no-print">
    <div class="footer-container">
      <div class="footer-left">
        <div class="system-info">
          <span class="system-icon">โก</span>
          <span class="system-name">ูุธุงู ุฅุฏุงุฑุฉ ุงูุญุฌูุฒุงุช ุงููุชูุฏู</span>
        </div>
        <div class="version-info">
          <span class="version-label">ุขุฎุฑ ุชุญุฏูุซ:</span>
          <span class="version-value">{{
            currentTime | date: "HH:mm:ss"
          }}</span>
        </div>
      </div>

      <div class="footer-right">
        <div class="footer-stats">
          <div class="stat-item">
            <span class="stat-icon">๐พ</span>
            <span class="stat-value">{{ bookings.length }} ุญุฌูุฒุงุช</span>
          </div>
          <div class="stat-item">
            <span class="stat-icon">๐</span>
            <span class="stat-value">{{ filteredBookings.length }} ูููุชุฑ</span>
          </div>
          <div class="stat-item">
            <span class="stat-icon">๐จ๏ธ</span>
            <span class="stat-value">{{ printTemplates.length }} ูุงูุจ</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
